<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Karir & Magang | MileniaNews</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/flatpickr/dist/flatpickr.min.css">
    <script src="https://cdn.jsdelivr.net/npm/flatpickr"></script>
    <link href="https://fonts.googleapis.com/css2?family=Plus+Jakarta+Sans:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: { brand: { 600: '#1d4ed8', 900: '#0f172a' } },
                    fontFamily: { sans: ['Plus Jakarta Sans', 'sans-serif'] }
                }
            }
        }
    </script>
    <style type="text/tailwindcss">
        /* Background Premium Newsroom */
        .bg-newsroom {
            background-image: linear-gradient(to bottom, rgba(15, 23, 42, 0.85), rgba(15, 23, 42, 0.95)), 
                              url('https://images.unsplash.com/photo-1497366216548-37526070297c?q=80&w=2301&auto=format&fit=crop');
            background-size: cover;
            background-position: center;
            background-attachment: fixed;
        }
        
        .glass-card { @apply bg-white/95 backdrop-blur-xl border border-white/20 shadow-2xl; }
        .input-group { @apply relative flex items-center; }
        .input-icon { @apply absolute left-4 text-gray-400 w-5 h-5 transition-colors duration-200; }
        .modern-input { 
            @apply w-full pl-12 pr-4 py-3.5 bg-gray-50 border border-gray-200 rounded-xl text-gray-800 text-sm font-medium 
            focus:bg-white focus:border-brand-600 focus:ring-4 focus:ring-blue-500/10 transition-all duration-300 outline-none; 
        }
        .modern-input.error { @apply border-red-500 ring-2 ring-red-500/10 bg-red-50; }
        .label-text { @apply block text-xs font-bold text-gray-600 uppercase tracking-wider mb-1.5 ml-1; }
    </style>
</head>
<body class="bg-newsroom min-h-screen text-slate-800 antialiased font-sans">

    <main class="relative z-10 max-w-5xl mx-auto px-4 py-16">
        
        <div class="text-center mb-10 text-white">
            <img src="logo.png" alt="MileniaNews" class="h-10 mx-auto mb-6 opacity-90">
            <h1 class="text-4xl md:text-5xl font-bold tracking-tight mb-4">
                Bergabunglah dengan <span class="text-blue-400">MileniaNews</span>
            </h1>
            <p class="text-lg text-gray-300 max-w-2xl mx-auto font-light">
                Program magang eksklusif untuk mahasiswa atau pelajar yang ingin mendalami jurnalisme digital, teknologi media, dan konten kreatif.
            </p>
        </div>

        <div class="glass-card rounded-3xl p-6 md:p-10">
            <form id="appForm" class="grid grid-cols-1 md:grid-cols-2 gap-6 md:gap-8" novalidate>
                
                <div class="md:col-span-2 border-b pb-4 mb-2">
                    <h3 class="text-xl font-bold text-slate-900">Data Diri</h3>
                    <p class="text-sm text-slate-500">Isi data sesuai KTP/KTM Anda.</p>
                </div>

                <div>
                    <label class="label-text">Nama Lengkap <span class="text-red-500">*</span></label>
                    <div class="input-group">
                        <svg class="input-icon" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"></path></svg>
                        <input type="text" name="fullname" class="modern-input" placeholder="Nama Lengkap" required>
                    </div>
                </div>

                <div>
                    <label class="label-text">WhatsApp <span class="text-red-500">*</span></label>
                    <div class="input-group">
                        <svg class="input-icon" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 5a2 2 0 012-2h3.28a1 1 0 01.948.684l1.498 4.493a1 1 0 01-.502 1.21l-2.257 1.13a11.042 11.042 0 005.516 5.516l1.13-2.257a1 1 0 011.21-.502l4.493 1.498a1 1 0 01.684.949V19a2 2 0 01-2 2h-1C9.716 21 3 14.284 3 6V5z"></path></svg>
                        <input type="tel" name="whatsapp" class="modern-input" placeholder="08xx-xxxx-xxxx" required>
                    </div>
                </div>

                <div>
                    <label class="label-text">Email <span class="text-red-500">*</span></label>
                    <div class="input-group">
                        <svg class="input-icon" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M16 12a4 4 0 10-8 0 4 4 0 008 0zm0 0v1.5a2.5 2.5 0 005 0V12a9 9 0 10-9 9m4.5-1.206a8.959 8.959 0 01-4.5 1.207"></path></svg>
                        <input type="email" name="email" id="emailInput" class="modern-input" placeholder="email@gmail.com" required>
                    </div>
                    <p id="emailError" class="hidden text-xs text-red-500 mt-1">Email wajib menggunakan '@'</p>
                </div>

                <div class="grid grid-cols-2 gap-4">
                    <div>
                        <label class="label-text">Tempat Lahir <span class="text-red-500">*</span></label>
                        <input type="text" name="pob" class="modern-input !pl-4" required>
                    </div>
                    <div>
                        <label class="label-text">Tanggal Lahir <span class="text-red-500">*</span></label>
                        <input type="text" id="dob-picker" name="dob" class="modern-input !pl-4 bg-white cursor-pointer" placeholder="Pilih Tgl" required readonly>
                    </div>
                </div>

                <div class="md:col-span-2 border-b pb-4 mb-2 mt-4">
                    <h3 class="text-xl font-bold text-slate-900">Data Akademik</h3>
                </div>

                <div>
                    <label class="label-text">Universitas / Sekolah <span class="text-red-500">*</span></label>
                    <div class="input-group">
                        <svg class="input-icon" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 21V5a2 2 0 00-2-2H7a2 2 0 00-2 2v16m14 0h2m-2 0h-5m-9 0H3m2 0h5M9 7h1m-1 4h1m4-4h1m-1 4h1m-5 10v-5a1 1 0 011-1h2a1 1 0 011 1v5m-4 0h4"></path></svg>
                        <input type="text" name="school" class="modern-input" required>
                    </div>
                </div>

                <div>
                    <label class="label-text">Jurusan & Semester <span class="text-red-500">*</span></label>
                    <div class="flex gap-2">
                        <input type="text" name="major" class="modern-input w-2/3" placeholder="Jurusan" required>
                        <input type="text" name="semester" class="modern-input w-1/3 !pl-4" placeholder="Sem" required>
                    </div>
                </div>

                <div class="md:col-span-2 mb-4">
                    <label class="label-text block mb-2">Durasi Magang <span class="text-red-500">*</span></label>
                    <select name="duration" class="modern-input w-full cursor-pointer" required>
                        <option value="" disabled selected>Pilih Durasi</option>
                        <option value="3 Bulan">3 Bulan</option>
                        <option value="6 Bulan">6 Bulan</option>
                    </select>
                </div>
                
                <div class="md:col-span-2">
                    <label class="label-text block mb-2">Alasan Mengikuti Magang <span class="text-red-500">*</span></label>
                    <textarea 
                        name="reason" 
                        rows="4" 
                        class="modern-input w-full py-3 px-4 resize-none" 
                        placeholder="Jelaskan alasan kenapa ingin mengikuti magang ini..." 
                        required
                    ></textarea>
                </div>

                <div class="md:col-span-2 bg-blue-50 rounded-xl p-6 border border-blue-100">
                    <h4 class="font-bold text-slate-800 mb-4">Upload Dokumen (Max 5MB per file)</h4>
                    <div class="grid grid-cols-1 md:grid-cols-3 gap-4">
                        <div class="relative group">
                            <label class="block text-xs font-bold text-gray-500 mb-1">CV (PDF)</label>
                            <input type="file" id="fileCV" accept=".pdf" class="block w-full text-sm text-slate-500 file:mr-4 file:py-2 file:px-4 file:rounded-full file:border-0 file:text-xs file:font-semibold file:bg-blue-600 file:text-white hover:file:bg-blue-700 transition-all"/>
                        </div>
                        <div class="relative group">
                            <label class="block text-xs font-bold text-gray-500 mb-1">Surat Pengantar (PDF)</label>
                            <input type="file" id="fileLetter" accept=".pdf" class="block w-full text-sm text-slate-500 file:mr-4 file:py-2 file:px-4 file:rounded-full file:border-0 file:text-xs file:font-semibold file:bg-blue-600 file:text-white hover:file:bg-blue-700 transition-all"/>
                        </div>
                        <div class="relative group">
                            <label class="block text-xs font-bold text-gray-500 mb-1">Foto Formal (JPG/PNG)</label>
                            <input type="file" id="filePhoto" accept="image/*" class="block w-full text-sm text-slate-500 file:mr-4 file:py-2 file:px-4 file:rounded-full file:border-0 file:text-xs file:font-semibold file:bg-blue-600 file:text-white hover:file:bg-blue-700 transition-all"/>
                        </div>
                    </div>
                </div>

                <div class="md:col-span-2 pt-4">
                    <button type="button" onclick="submitForm()" id="btnSubmit" class="w-full bg-slate-900 hover:bg-black text-white font-bold py-4 rounded-xl shadow-xl transform transition hover:-translate-y-1 active:scale-95 text-lg flex justify-center items-center gap-2">
                        <span>Kirim Lamaran</span>
                    </button>
                    <p id="loadingText" class="text-center text-sm text-gray-500 mt-2 hidden">Mengupload berkas...</p>
                </div>

            </form>
        </div>
    </main>

    <div id="successModal" class="fixed inset-0 z-50 flex items-center justify-center bg-black/80 backdrop-blur-sm hidden">
        <div class="bg-white rounded-2xl p-8 max-w-sm w-full text-center shadow-2xl animate-bounce-in">
            <div class="w-16 h-16 bg-green-100 rounded-full flex items-center justify-center mx-auto mb-4">
                <svg class="w-8 h-8 text-green-600" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"></path></svg>
            </div>
            <h3 class="text-2xl font-bold text-slate-900">Terkirim!</h3>
            <p class="text-slate-500 mb-6 mt-2">Lamaran Anda telah tersimpan di sistem Database MileniaNews.</p>
            <a href="https://milenianews.com" class="block w-full bg-blue-600 hover:bg-blue-700 text-white font-bold py-3 rounded-xl transition-colors">
                Buka Website Berita
            </a>
        </div>
    </div>

    <script>
        flatpickr("#dob-picker", { dateFormat: "d F Y", defaultDate: "2000-01-01" });

        // Fungsi Membaca File jadi Kode Base64 (Agar bisa dibuka di Admin)
        const fileToBase64 = (file) => {
            return new Promise((resolve, reject) => {
                const reader = new FileReader();
                reader.readAsDataURL(file);
                reader.onload = () => resolve(reader.result);
                reader.onerror = error => reject(error);
            });
        };

        async function submitForm() {
            const form = document.getElementById('appForm');
            const btn = document.getElementById('btnSubmit');
            const loading = document.getElementById('loadingText');

            // 1. Validasi Input Biasa
            if (!form.checkValidity()) {
                form.reportValidity();
                return;
            }

            // 2. Validasi Email
            const email = document.getElementById('emailInput').value;
            if (!email.includes('@')) {
                alert("Email tidak valid!");
                return;
            }

            // 3. Validasi & Ambil File
            const cvFile = document.getElementById('fileCV').files[0];
            const letterFile = document.getElementById('fileLetter').files[0];
            const photoFile = document.getElementById('filePhoto').files[0];

            if (!cvFile || !letterFile || !photoFile) {
                alert("Harap upload semua dokumen (CV, Surat, Foto)!");
                return;
            }

            // Cek Ukuran File (Max 5MB biar browser gak nge-lag)
            if (cvFile.size > 5000000 || letterFile.size > 5000000 || photoFile.size > 5000000) {
                alert("Ukuran file terlalu besar! Maksimal 5MB per file untuk demo ini.");
                return;
            }

            // Proses Upload (Konversi ke Base64)
            btn.disabled = true;
            btn.innerHTML = "Memproses...";
            loading.classList.remove('hidden');

            try {
                const cvBase64 = await fileToBase64(cvFile);
                const letterBase64 = await fileToBase64(letterFile);
                const photoBase64 = await fileToBase64(photoFile);

                const formData = new FormData(form);
                const applicantData = {
                    id: Date.now(),
                    timestamp: new Date().toLocaleString('id-ID'),
                    fullname: formData.get('fullname'),
                    whatsapp: formData.get('whatsapp'),
                    email: formData.get('email'),
                    pob: formData.get('pob'),
                    dob: formData.get('dob'),
                    school: formData.get('school'),
                    major: formData.get('major'),
                    semester: formData.get('semester'),
                    duration: formData.get('duration'),
                    // Simpan Data File Asli (Base64)
                    files: {
                        cv: cvBase64,
                        letter: letterBase64,
                        photo: photoBase64,
                        cvName: cvFile.name,
                        photoName: photoFile.name
                    }
                };

                let applicants = JSON.parse(localStorage.getItem('mileniaApplicants') || '[]');
                applicants.push(applicantData);
                localStorage.setItem('mileniaApplicants', JSON.stringify(applicants));

                document.getElementById('successModal').classList.remove('hidden');

            } catch (error) {
                alert("Gagal memproses file. Coba file yang lebih kecil.");
                console.error(error);
                btn.disabled = false;
                btn.innerHTML = "Kirim Lamaran";
            }
        }
    </script>
</body>
</html>
